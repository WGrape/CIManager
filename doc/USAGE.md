<div align="center"><h1>使用文档</h1></div>

## 一、变量配置

> 关于变量配置可以参考项目 [apimock-example](https://jihulab.com/WGrape/apimock-example)

### 1、系统变量
下面是所支持的系统级别的变量

| 变量名 | 必须  | 含义    | 备注 |
| ---- |----|----|----|
| GOPATH | 否   | Go环境配置 | 无  |

### 2、项目变量
下面是所支持的项目级别的变量

| 变量名          | 必须  | 含义    | 备注  |
|--------------|-----|-------|-----|
| PROJECT_NAME | 否   | 项目名称  | 无   |

### 3、Job变量
下面是在不同Job中所支持的变量

#### (1) CI_STAGE_PRE

##### ① 预检查

| 变量名                              | 必须  | 含义      | 备注  |
|----------------------------------|-----|---------|-----|
| CI_STAGE_BUILD_JOB_PRE_CHECK_CMD | 否   | 预先检查的命令 | 无   |

##### ② 预安装

| 变量名                                | 必须  | 含义      | 备注  |
|------------------------------------|-----|---------|-----|
| CI_STAGE_BUILD_JOB_PRE_INSTALL_CMD | 否   | 预先安装的命令 | 无   |

#### (2) CI_STAGE_TEST

##### ① 代码检查

| 变量名                               | 必须  | 含义      | 备注  |
|-----------------------------------|-----|---------|-----|
| CI_STAGE_BUILD_JOB_CHECK_CODE_CMD | 否   | 代码检查的命令 | 无   |

##### ② 单元测试

| 变量名                              | 必须  | 含义      | 备注  |
|----------------------------------|-----|---------|-----|
| CI_STAGE_BUILD_JOB_UNIT_TEST_CMD | 否   | 单元测试的命令 | 无   |

#### (3) CI_STAGE_BUILD

#### ① 接口文档生成

| 变量名                               | 必须  | 含义                 | 备注  |
|-----------------------------------|-----|--------------------|-----|
| CI_STAGE_BUILD_JOB_APIDOC_GEN_CMD | 否   | 生成接口文档时的命令         | 无   |

#### ② 本地构建

| 变量名                                | 必须 | 含义       | 备注  |
|------------------------------------|----|----------|-----|
| CI_STAGE_BUILD_JOB_LOCAL_BUILD_CMD | 时  | 项目构建时的命令 | 无   |

#### (4) CD_STAGE_DEPLOY

##### ① SSH部署

| 变量名                          | 必须 | 含义          | 备注  |
|------------------------------|----|-------------|-----|
| CD_STAGE_MONITOR_JOB_SSH_CMD | 否  | 执行SSH部署时的命令 | 无   |

##### ② 拉取制品部署

| 变量名                                    | 必须 | 含义           | 备注  |
|----------------------------------------|----|--------------|-----|
| CD_STAGE_MONITOR_JOB_PULL_ARTIFACT_CMD | 否  | 使用拉取镜像部署时的命令 | 无   |

#### (5) CD_STAGE_MONITOR

##### ① 接口测试检查

| 变量名                                   | 必须 | 含义           | 备注  |
|---------------------------------------|----|--------------|-----|
| CD_STAGE_MONITOR_JOB_API_TEST_CMD     | 否  | 执行接口测试的命令    | 无   |
| CD_STAGE_MONITOR_JOB_API_TEST_CMD_RES | 否  | 接口请求成功时的返回内容 | 无   |

##### ② 健康检查

| 变量名                                       | 必须 | 含义           | 备注  |
|-------------------------------------------|----|--------------|-----|
| CD_STAGE_MONITOR_JOB_HEALTH_CHECK_CMD     | 否  | 执行健康检查的命令    | 无   |
| CD_STAGE_MONITOR_JOB_HEALTH_CHECK_CMD_RES | 否  | 健康检查成功时的返回内容 | 无   |
